<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ROZPIERDOL W WALENCJI üåûüçä</title>
  
  <style>
    html, body {
      margin: 0;
      padding: 0;
      font-family: 'Comic Sans MS', cursive;
      overflow-x: hidden;
      color: white;
      text-align: center;
      height: 100vh;
      background: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.3)), 
                  url('https://i.ibb.co/VYNBbF7f/Bez-tytu-u.jpg');
      background-size: cover;
      background-position: center;
      background-attachment: fixed;
    }

    .content-wrapper {
      background: rgba(0, 0, 0, 0.5);
      min-height: 100vh;
      padding: 20px;
    }

    h1 {
      font-size: 3em;
      margin-top: 40px;
      text-shadow: 2px 2px 8px black;
      animation: neon 2s infinite alternate;
      color: #ffde59;
    }

    @keyframes neon {
      from {
        text-shadow: 0 0 10px #fff, 0 0 20px #ffde59, 0 0 30px #ff8c00;
      }
      to {
        text-shadow: 0 0 5px #fff, 0 0 10px #ffde59, 0 0 15px #ff8c00;
      }
    }

    #countdown {
      font-size: 2em;
      margin: 20px 0;
      text-shadow: 1px 1px 3px #000;
      color: #ffde59;
    }

    #factBox {
      margin: 20px auto;
      font-size: 1.3em;
      background: rgba(255, 222, 89, 0.2);
      padding: 15px;
      border-radius: 12px;
      display: inline-block;
      max-width: 80%;
      backdrop-filter: blur(5px);
      border: 2px solid #ffde59;
    }

    button {
      margin-top: 10px;
      padding: 12px 25px;
      border: none;
      background-color: #ffde59;
      color: #333;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1em;
      transition: all 0.2s ease;
      font-weight: bold;
    }

    button:hover {
      background-color: #ff8c00;
      color: white;
      transform: scale(1.05);
    }

    button:active {
      transform: scale(0.98);
      box-shadow: 0 0 20px #ffde59;
    }

    .firework, .explosion {
      position: fixed;
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: #ffde59;
      box-shadow: 0 0 15px #ff8c00;
      animation: explode 1s ease-out forwards;
      z-index: 999;
    }

    @keyframes explode {
      0% { transform: scale(1); opacity: 1; }
      100% { transform: scale(20); opacity: 0; }
    }

    .orange, .paella {
      position: fixed;
      bottom: -50px;
      font-size: 2em;
      animation: floatUp 10s linear forwards;
      z-index: 999;
      opacity: 0.9;
      pointer-events: none;
    }

    .paella {
      font-size: 1.8em;
    }

    @keyframes floatUp {
      0% { transform: translateY(0); opacity: 1; }
      100% { transform: translateY(-100vh); opacity: 0; }
    }

    .sangria {
      position: fixed;
      top: -50px;
      font-size: 2em;
      transform: rotate(0deg);
      animation: dropSangria 5s linear forwards;
      pointer-events: none;
      z-index: 998;
    }

    @keyframes dropSangria {
      0% {
        transform: translateY(0) rotate(0deg);
        opacity: 1;
      }
      100% {
        transform: translateY(110vh) rotate(720deg);
        opacity: 0;
      }
    }

    #tictactoeContainer {
      margin: 30px auto;
      padding: 20px;
      background: rgba(255, 222, 89, 0.1);
      border-radius: 15px;
      max-width: 500px;
      backdrop-filter: blur(5px);
      border: 2px solid #ffde59;
    }

    #tictactoeBoard {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      grid-gap: 10px;
      margin: 20px auto;
      max-width: 300px;
    }

    .tictactoe-cell {
      aspect-ratio: 1;
      background: rgba(255, 222, 89, 0.2);
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s ease;
      overflow: hidden;
      border: 1px solid #ffde59;
    }

    .tictactoe-cell:hover {
      background: rgba(255, 222, 89, 0.3);
      transform: scale(1.05);
    }

    .cell-image {
      width: 80%;
      height: 80%;
      object-fit: cover;
      border-radius: 5px;
    }

    #tictactoeMessage {
      font-size: 1.2em;
      margin: 15px 0;
      min-height: 30px;
      font-weight: bold;
      color: #ffde59;
    }

    #startTicTacToe {
      background: #ff8c00;
      color: white;
      font-weight: bold;
      margin-bottom: 20px;
    }

    #currentPlayers {
      font-size: 1.1em;
      margin: 10px 0;
      color: #ffde59;
    }

    .player-info {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin: 15px 0;
    }

    .player-card {
      background: rgba(255, 222, 89, 0.2);
      padding: 10px;
      border-radius: 10px;
      border: 1px solid #ffde59;
      min-width: 120px;
    }

    .player-card.active {
      background: rgba(255, 140, 0, 0.3);
      border: 2px solid #ff8c00;
    }

    .game-mode {
      margin: 15px 0;
    }

    .player-select {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin: 10px 0;
      flex-wrap: wrap;
    }

    select {
      padding: 8px 12px;
      border-radius: 8px;
      border: 1px solid #ffde59;
      background: rgba(255, 222, 89, 0.9);
      color: #333;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <div class="content-wrapper">
    <h1>Rozpierdol w Walencji üåûüçä</h1>
    <div id="countdown">Liczymy dni do lotu...</div>

    <div id="factBox">Kliknij przycisk, ≈ºeby poznaƒá ciekawostkƒô o Walencji!</div><br>
    <button onclick="showFact()">üéì Poka≈º ciekawostkƒô</button>

    <div id="tictactoeContainer">
      <div class="game-mode">
        <strong>Wybierz tryb gry:</strong><br>
        <button onclick="setGameMode('human')">üë• 2 Graczy</button>
        <button onclick="setGameMode('computer')">ü§ñ vs Komputer</button>
      </div>

      <div id="playerSelection" style="display: none;">
        <div class="player-select">
          <select id="player1Select">
            <option value="">Wybierz gracza 1</option>
          </select>
          <select id="player2Select">
            <option value="">Wybierz gracza 2</option>
          </select>
        </div>
        <button id="startTicTacToe">üéÆ Start Gry</button>
      </div>

      <div id="currentPlayers"></div>
      <div class="player-info">
        <div class="player-card" id="player1Info"></div>
        <div class="player-card" id="player2Info"></div>
      </div>
      <div id="tictactoeMessage">Wybierz tryb gry!</div>
      <div id="tictactoeBoard"></div>
    </div>

    <audio autoplay loop>
      <source src="nutka.mp3" type="audio/mpeg">
    </audio>

    <script>
      // NOWA DATA - 5 stycznia 2026
      const endDate = new Date("2026-01-05T00:00:00").getTime();
      const countdownEl = document.getElementById("countdown");

      setInterval(() => {
        const now = new Date().getTime();
        const distance = endDate - now;

        const days = Math.floor(distance / (1000 * 60 * 60 * 24));
        const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((distance % (1000 * 60)) / 1000);

        countdownEl.innerHTML = `Zosta≈Ço: ${days} dni, ${hours}h ${minutes}m ${seconds}s`;
      }, 1000);

      const facts = [
        "Walencja jest trzecim co do wielko≈õci miastem w Hiszpanii, zaraz po Madrycie i Barcelonie! üèôÔ∏è",
        "Walencja s≈Çynie z Fallas - festiwalu, podczas kt√≥rego tworzy siƒô ogromne rze≈∫by, a potem siƒô je pali! üî•",
        "W Walencji narodzi≈Ço siƒô s≈Çynne hiszpa≈Ñskie danie - paella! ü•ò",
        "Miasto ma w≈ÇasnƒÖ rzekƒô, kt√≥ra zosta≈Ça zamieniona w piƒôkny park - Jard√≠n del Turia! üå≥",
        "Oceanografic w Walencji to najwiƒôksze oceanarium w Europie! üê†",
        "Walencja ma ponad 300 s≈Çonecznych dni w roku! ‚òÄÔ∏è",
        "Tutaj produkuje siƒô s≈Çynny nap√≥j orszadowy - horchata! ü•§",
        "Stadion Mestalla to jeden z najstarszych still dzia≈ÇajƒÖcych stadion√≥w pi≈Çkarskich w Hiszpanii! ‚öΩ",
        "Walencja ma w≈Çasny jƒôzyk - walencki, kt√≥ry jest odmianƒÖ katalo≈Ñskiego! üí¨",
        "Miasto s≈Çynie z futurystycznego kompleksu Ciudad de las Artes y las Ciencias! üèõÔ∏è",
        "W Walencji je≈∫dzi najstarsza linia metra w Hiszpanii! üöá",
        "Lonja de la Seda (Gie≈Çda Jedwabiu) jest wpisana na listƒô UNESCO! üè∞",
        "Tutaj odbywa siƒô s≈Çynny festiwal muzyczny - Festival de Benic√†ssim! üéµ",
        "Walencja ma najwiƒôksze centrum miejskie w Europie bez ruchu samochodowego! üö∂‚Äç‚ôÇÔ∏è",
        "Tutaj narodzi≈Ç siƒô s≈Çynny autor Santiago Calatrava - architekt wielu ikonicznych budynk√≥w! üèóÔ∏è"
      ];

      function showFact() {
        const factBox = document.getElementById("factBox");
        const randomFact = facts[Math.floor(Math.random() * facts.length)];
        factBox.textContent = randomFact;
        triggerExplosion();
      }

      function triggerExplosion() {
        const explosion = document.createElement("div");
        explosion.className = "explosion";
        explosion.style.left = (window.innerWidth / 2 - 5) + "px";
        explosion.style.top = (window.innerHeight / 2 - 5) + "px";
        document.body.appendChild(explosion);
        setTimeout(() => explosion.remove(), 1000);
      }

      setInterval(() => {
        const orange = document.createElement("div");
        orange.classList.add("orange");
        orange.style.left = Math.random() * 100 + "vw";
        orange.textContent = "üçä";
        document.body.appendChild(orange);
        setTimeout(() => orange.remove(), 10000);
      }, 3000);

      setInterval(() => {
        const paella = document.createElement("div");
        paella.classList.add("paella");
        paella.style.left = Math.random() * 100 + "vw";
        paella.textContent = "ü•ò";
        document.body.appendChild(paella);
        setTimeout(() => paella.remove(), 10000);
      }, 4000);

      setInterval(() => {
        const sangria = document.createElement("div");
        sangria.classList.add("sangria");
        sangria.style.left = Math.random() * 100 + "vw";
        sangria.textContent = "üç∑";
        document.body.appendChild(sangria);
        setTimeout(() => sangria.remove(), 5000);
      }, 8000);

      // GRACZE + KOMPUTER
      const players = [
        { name: 'Kamilka', gender: 'female', image: 'kamilka.jpg' },
        { name: 'Ola', gender: 'female', image: 'ola.jpg' },
        { name: 'Marta', gender: 'female', image: 'marta.jpg' },
        { name: 'Szymcio', gender: 'male', image: 'szymcio.jpg' },
        { name: 'Morlin', gender: 'male', image: 'morlin.jpg' },
        { name: 'Jasiek', gender: 'male', image: 'jasiek.jpg' },
        { name: 'Fistasiu', gender: 'male', image: 'fistasiu.jpg' },
        { name: 'Kacperek', gender: 'male', image: 'kacperek.jpg' }
      ];

      const computerPlayer = { name: 'Komputer', gender: 'male', image: 'usmiech.jpg' };

      const tictactoeBoard = document.getElementById('tictactoeBoard');
      const tictactoeMessage = document.getElementById('tictactoeMessage');
      const currentPlayersEl = document.getElementById('currentPlayers');
      const player1InfoEl = document.getElementById('player1Info');
      const player2InfoEl = document.getElementById('player2Info');
      const startTicTacToeBtn = document.getElementById('startTicTacToe');
      const playerSelectionDiv = document.getElementById('playerSelection');
      const player1Select = document.getElementById('player1Select');
      const player2Select = document.getElementById('player2Select');

      let gameMode = null;
      let player1 = null;
      let player2 = null;
      let currentPlayer = null;
      let gameBoard = ['', '', '', '', '', '', '', '', ''];
      let gameActive = false;

      const winningConditions = [
        [0, 1, 2], [3, 4, 5], [6, 7, 8],
        [0, 3, 6], [1, 4, 7], [2, 5, 8],
        [0, 4, 8], [2, 4, 6]
      ];

      // Wype≈Çnij selecty graczami
      function populatePlayerSelects() {
        players.forEach(player => {
          const option1 = new Option(player.name, player.name);
          const option2 = new Option(player.name, player.name);
          player1Select.add(option1);
          player2Select.add(option2);
        });
      }

      function setGameMode(mode) {
        gameMode = mode;
        playerSelectionDiv.style.display = 'block';
        
        if (mode === 'computer') {
          player2Select.innerHTML = '<option value="computer">Komputer</option>';
          tictactoeMessage.textContent = 'Wybierz gracza i zacznij grƒô z komputerem!';
        } else {
          populatePlayerSelects();
          tictactoeMessage.textContent = 'Wybierz dw√≥ch graczy i zacznij grƒô!';
        }
      }

      function getPlayerByName(name) {
        if (name === 'computer') return computerPlayer;
        return players.find(player => player.name === name);
      }

      function getGenderEnding(player, action) {
        if (player.gender === 'female') {
          return action === 'win' ? 'wygra≈Ça' : 'przegra≈Ça';
        } else {
          return action === 'win' ? 'wygra≈Ç' : 'przegra≈Ç';
        }
      }

      function startTicTacToe() {
        const player1Name = player1Select.value;
        const player2Name = player2Select.value;
        
        if (!player1Name || !player2Name) {
          tictactoeMessage.textContent = 'Wybierz obu graczy!';
          return;
        }

        player1 = getPlayerByName(player1Name);
        player2 = getPlayerByName(player2Name);

        // Gracz 1 zaczyna
        currentPlayer = player1;

        gameBoard = ['', '', '', '', '', '', '', '', ''];
        gameActive = true;
        
        // Pokaz kto gra
        currentPlayersEl.innerHTML = `üéÆ <strong>${player1.name}</strong> vs <strong>${player2.name}</strong>`;
        
        tictactoeMessage.textContent = `${player1.name} zaczyna grƒô!`;
        
        updatePlayerCards();
        renderBoard();
      }

      function updatePlayerCards() {
        player1InfoEl.innerHTML = `üî¥ ${player1.name}`;
        player2InfoEl.innerHTML = `üîµ ${player2.name}`;
        
        // Pod≈õwietl aktywnego gracza
        player1InfoEl.classList.remove('active');
        player2InfoEl.classList.remove('active');
        
        if (currentPlayer === player1) {
          player1InfoEl.classList.add('active');
          player1InfoEl.innerHTML += `<br><small><strong>TWOJA TURA</strong></small>`;
        } else {
          player2InfoEl.classList.add('active');
          player2InfoEl.innerHTML += `<br><small><strong>TWOJA TURA</strong></small>`;
        }
      }

      function renderBoard() {
        tictactoeBoard.innerHTML = '';
        for (let i = 0; i < 9; i++) {
          const cell = document.createElement('div');
          cell.className = 'tictactoe-cell';
          cell.dataset.index = i;
          
          if (gameBoard[i] === 'player1') {
            const img = document.createElement('img');
            img.src = getImageUrl(player1.image);
            img.className = 'cell-image';
            img.alt = player1.name;
            img.onerror = function() {
              this.src = 'https://via.placeholder.com/100/ffde59/000000?text=' + player1.name.charAt(0);
            };
            cell.appendChild(img);
          } else if (gameBoard[i] === 'player2') {
            const img = document.createElement('img');
            img.src = getImageUrl(player2.image);
            img.className = 'cell-image';
            img.alt = player2.name;
            img.onerror = function() {
              this.src = 'https://via.placeholder.com/100/ff8c00/ffffff?text=' + player2.name.charAt(0);
            };
            cell.appendChild(img);
          }
          
          cell.addEventListener('click', () => handleCellClick(i));
          tictactoeBoard.appendChild(cell);
        }
      }

      // FUNKCJA DO POBRANIA URL ZDJƒòCIA Z GITHUB
      function getImageUrl(imageName) {
        const baseUrl = window.location.href;
        const repoUrl = baseUrl.split('/').slice(0, -1).join('/');
        return `${repoUrl}/${imageName}`;
      }

      function handleCellClick(index) {
        if (!gameActive || gameBoard[index] !== '') {
          return;
        }

        // Ruch gracza
        if (currentPlayer === player1) {
          gameBoard[index] = 'player1';
        } else {
          gameBoard[index] = 'player2';
        }

        renderBoard();

        // Sprawd≈∫ czy kto≈õ wygra≈Ç
        if (checkWinner()) {
          const winner = currentPlayer;
          const winText = getGenderEnding(winner, 'win');
          tictactoeMessage.innerHTML = `üéâ <strong>${winner.name} ${winText}! Pysio wisi mi 50 euro! üéâ</strong>`;
          gameActive = false;
          triggerExplosion();
          return;
        }

        // Sprawd≈∫ remis
        if (isBoardFull()) {
          tictactoeMessage.textContent = 'Remis! Nikt nie wygra≈Ç 50 euro!';
          gameActive = false;
          return;
        }

        // Zmiana gracza
        currentPlayer = (currentPlayer === player1) ? player2 : player1;
        
        // Je≈õli to komputer, wykonaj jego ruch
        if (gameMode === 'computer' && currentPlayer.name === 'Komputer') {
          tictactoeMessage.textContent = 'Komputer my≈õli...';
          setTimeout(computerMove, 1000);
        } else {
          tictactoeMessage.textContent = `Ruch ${currentPlayer.name}!`;
          updatePlayerCards();
        }
      }

      function computerMove() {
        if (!gameActive) return;
        
        const emptyCells = gameBoard.map((cell, index) => cell === '' ? index : null).filter(val => val !== null);
        const randomIndex = emptyCells[Math.floor(Math.random() * emptyCells.length)];
        
        gameBoard[randomIndex] = 'player2';
        renderBoard();

        // Sprawd≈∫ czy komputer wygra≈Ç
        if (checkWinner()) {
          const loseText = getGenderEnding(player1, 'lose');
          tictactoeMessage.innerHTML = `üíÄ <strong>${player1.name} ${loseText}! Komputer wygra≈Ç! üíÄ</strong>`;
          gameActive = false;
          return;
        }

        // Sprawd≈∫ remis
        if (isBoardFull()) {
          tictactoeMessage.textContent = 'Remis! Nikt nie wygra≈Ç 50 euro!';
          gameActive = false;
          return;
        }

        // Zmiana na gracza
        currentPlayer = player1;
        tictactoeMessage.textContent = `Tw√≥j ruch ${player1.name}!`;
        updatePlayerCards();
      }

      function checkWinner() {
        for (let condition of winningConditions) {
          const [a, b, c] = condition;
          if (gameBoard[a] && gameBoard[a] === gameBoard[b] && gameBoard[a] === gameBoard[c]) {
            return true;
          }
        }
        return false;
      }

      function isBoardFull() {
        return gameBoard.every(cell => cell !== '');
      }

      startTicTacToeBtn.addEventListener('click', startTicTacToe);
      renderBoard();

      // DODAJ ZASTƒòPCZE ZDJƒòCIA GDY ORGINA≈Å SIƒò NIE WCZYTA
      function addImageFallbacks() {
        const images = document.querySelectorAll('.cell-image');
        images.forEach(img => {
          img.onerror = function() {
            this.src = 'https://via.placeholder.com/100/667eea/ffffff?text=?';
          };
        });
      }
    </script>
  </div>
</body>
</html>
